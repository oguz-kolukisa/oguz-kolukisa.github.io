#!/bin/bash

set -e

# Base URL for downloading scripts
BASE_URL="https://oguz-kolukisa.github.io"

# Create temporary directory for scripts
echo "Downloading installation scripts..."
TEMP_DIR=$(mktemp -d)
SCRIPT_DIR="$TEMP_DIR"
mkdir -p "$SCRIPT_DIR/install_scripts"
mkdir -p "$SCRIPT_DIR/config_settings"

# Download all required scripts
wget -q "$BASE_URL/install_scripts/basic.sh" -O "$SCRIPT_DIR/install_scripts/basic.sh"
wget -q "$BASE_URL/install_scripts/github.sh" -O "$SCRIPT_DIR/install_scripts/github.sh"
wget -q "$BASE_URL/install_scripts/copilot.sh" -O "$SCRIPT_DIR/install_scripts/copilot.sh"
wget -q "$BASE_URL/install_scripts/anaconda.sh" -O "$SCRIPT_DIR/install_scripts/anaconda.sh"
wget -q "$BASE_URL/config_settings/penguin.sh" -O "$SCRIPT_DIR/config_settings/penguin.sh"

chmod +x "$SCRIPT_DIR/install_scripts/"*.sh
chmod +x "$SCRIPT_DIR/config_settings/"*.sh

# Cleanup function to remove temp directory on exit
trap "rm -rf $TEMP_DIR" EXIT

sudo apt update -qq
sudo apt upgrade -y -qq

# Ask to install basic command files
read -p "Do you want to install basic command files (curl, vim, git)? (y/n): " install_basics
if [[ "$install_basics" =~ ^[Yy]$ ]]; then
  bash "$SCRIPT_DIR/install_scripts/basic.sh"
else
  echo "Skipping basic command files installation."
fi

# Ask to install GitHub CLI
read -p "Do you want to install GitHub CLI (gh)? (y/n): " install_gh
if [[ "$install_gh" =~ ^[Yy]$ ]]; then
  bash "$SCRIPT_DIR/install_scripts/github.sh"
  
  # Ask to install GitHub Copilot CLI
  read -p "Do you want to install GitHub Copilot CLI? (y/n): " install_copilot
  if [[ "$install_copilot" =~ ^[Yy]$ ]]; then
    bash "$SCRIPT_DIR/install_scripts/copilot.sh"
  else
    echo "Skipping GitHub Copilot CLI installation."
  fi
else
  echo "Skipping GitHub CLI installation."
fi

# Ask to install Anaconda
read -p "Do you want to install Anaconda? (y/n): " install_anaconda
if [[ "$install_anaconda" =~ ^[Yy]$ ]]; then
  bash "$SCRIPT_DIR/install_scripts/anaconda.sh"
else
  echo "Skipping Anaconda installation."
fi

# Apply penguin configuration
bash "$SCRIPT_DIR/config_settings/penguin.sh"

